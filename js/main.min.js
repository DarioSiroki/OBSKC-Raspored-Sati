$(document).ready(function(){function n(n){for(var e=n+"=",o=document.cookie.split(";"),t=0;t<o.length;t++){for(var a=o[t];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return null}function e(){document.cookie="input="+s+";expires=Wed, 1 Jan 2070 12:00:00 UTC",document.cookie="smjena="+u+";expires=Wed, 1 Jan 2070 12:00:00 UTC",document.cookie="osoba="+f+";expires=Wed, 1 Jan 2070 12:00:00 UTC"}function o(){document.cookie="input=; expires=Thu, 01 Jan 1970 00:00:00 UTC",document.cookie="smjena=; expires=Thu, 01 Jan 1970 00:00:00 UTC",document.cookie="osoba=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}function t(){var n;return $.ajax({url:"js/A.json",dataType:"json",async:!1,success:function(e){n=e}}),n}function a(){var n;return $.ajax({url:"js/B.json",dataType:"json",async:!1,success:function(e){n=e}}),n}function r(){function n(){l.length=0;for(var n=[],e=3;r>e;e++)for(var t=1;36>t;t++)n.push(o[e][t]);$.each(n,function(n,e){-1===$.inArray(e,l)&&l.push(e)})}function e(){l.length=0;for(var n=3;r>n;n++)l.push(o[n][0])}if("Učenik"==f){if("js/A.json"==u){var o=t(),r=o.length;n()}else if("js/B.json"==u){var o=a(),r=o.length;n()}}else if("Profesor"==f)if("js/A.json"==u){var o=t(),r=o.length;e()}else if("js/B.json"==u){var o=a(),r=o.length;e()}}function c(){function n(){d=["pon","uto","sri","cet","pet"];var e=["7.45-8.30","8.35-9.20","9.25-10.10","10.25-11.10","11.15-12.00","12.05-12.50","12.55-13.40"],o=["13.45-14.30","14.35-15.20","15.25-16.10","16.25-17.10","17.15-18.00","18.05-18.50","18.55-19.40"];n=-1!==c[0][0].search("PRIJE")?e:o}function e(){var e=-1;for(i=2;i<l;i++)if(-1!==c[i][0].toUpperCase().search(s))for(var o=1;36>o;o+=7){var t="";for(z=o;z<o+7;z++)t+="<th>"+(z-o+1)+".sat ("+n[z-o]+")</th><tr><td>"+c[i][z]+"</td></tr>";e++,document.getElementById(d[e]).innerHTML=t}r()}function o(){for(var e=-1,o=1;36>o;o+=7){var t="";for(y=o;y<o+7;y++){var a=0;for(t+="<th>"+(y-o+1)+".sat ("+n[y-o]+")</th><tr>",x=2;x<l;x++)c[x][y]==s&&(0==a?(t+="<td>"+c[x][0],a++):t+="/"+c[x][0]);t+="</td></tr>"}e++,document.getElementById(d[e]).innerHTML=t}r()}function r(){document.getElementById("info").innerHTML="Raspored za: <br>"+c[1][0]+",<br>"+s;var n=new Date,e=n.getDay();(e>5||0==e)&&(e=1),$("#accordion").accordion({active:e-1})}var c,l,d;"js/A.json"==u?(c=t(),l=c.length):"js/B.json"==u&&(c=a(),l=c.length),"Učenik"==f?(n(),o()):"Profesor"==f&&(n(),e())}var s,u,f,l=[];$("#accordion").accordion({collapsible:!0,active:!1,heightStyle:"content"}),s=n("input"),u=n("smjena"),f=n("osoba"),s&&u&&""!==f&&c(),$("#tags").autocomplete({delay:0,source:l,minlength:0}),$(".osoba").click(function(){$(".smjena").prop("disabled",!1),f=$(".osoba:checked").val()||[],r()}),$(".smjena").click(function(){$("#tags").prop("disabled",!1),u=$(".smjena:checked").val()||[],r()}),$("#tags").click(function(){$(".en").prop("disabled",!1)}),$(".en").click(function(){s=$("#tags").val().toUpperCase(),o(),c()}),$("#remember").click(function(){s=$("#tags").val().toUpperCase(),e(),c()})});